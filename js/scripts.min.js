function loadXMLDoc(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&'function'==typeof b&&b(JSON.parse(c.responseText))},c.open('GET',a,!0),c.send()}function objectToArray(a){for(var b=[],c=Object.keys(a).length,d=0;c>d;d++)b.push(a[d]);return b}function newBoard(a){for(var b,c=document.getElementsByName('level'),d=0;d<c.length;d++)c[d].checked&&(b=c[d].value);var e=b*(b/2),f=100/b;tiles_flipped=0;var g='';a.memory_tile_shuffle();for(var d=0;e>d;d++)new_memory_array.push(a[d]),new_memory_array.push(a[d]);new_memory_array.memory_tile_shuffle();for(var d=0;d<new_memory_array.length;d++)g+='<div id="tile_'+d+'" style="width: '+f+'%; height: '+f+'%" onclick="memoryFlipTile(this,\''+new_memory_array[d]+'\')"></div>';document.getElementById('memoryBoard').innerHTML=g}function memoryFlipTile(a,b){''==a.innerHTML&&memory_values.length<2&&(game_started===!1&&(timer=setInterval(countTime,1e3),game_started=!0),a.style.background=b,a.innerHTML=b,0==memory_values.length?(memory_values.push(b),memory_tile_ids.push(a.id)):1==memory_values.length&&(memory_values.push(b),memory_tile_ids.push(a.id),memory_values[0]==memory_values[1]?(tiles_flipped+=2,memory_values=[],memory_tile_ids=[],tiles_flipped==new_memory_array.length&&finishGame(current_object,current_level.tiles)):setTimeout(flip2Back,500)))}function flip2Back(){var a=document.getElementById(memory_tile_ids[0]),b=document.getElementById(memory_tile_ids[1]);a.style.background='red',a.innerHTML='',b.style.background='red',b.innerHTML='',memory_values=[],memory_tile_ids=[]}function gameStatus(){game_started===!1&&(timer=setInterval(countTime,1e3),game_started=!0)}function countTime(){current_time++;var a='',b=Math.floor(current_time/60),c=current_time%60;return a=0>b?10>c?'00:0'+c:'00:'+c:10>c?10>b?'0'+b+':0'+c:b+':0'+c:10>b?'0'+b+':'+c:b+':'+c,document.getElementById('timer').innerHTML=a,a}function getLevels(a){for(var b='',c=Object.keys(a).length,d=0;c>d;d++){if(1===d)var e='checked="checked"';else var e='';b+='<label><input type="radio" name="level" value="'+a[d].tiles+'" '+e+'> '+a[d].name+'</label>'}document.getElementById('levels').innerHTML=b}function hideElement(a){document.getElementById(a).className='hide'}function removeClasses(a){document.getElementById(a).className=''}function finishGame(a,b){game_started=!1,clearInterval(timer),hideElement('boardContainer'),removeClasses('endGameContainer'),getHighscore(a,'highScore10',current_level.tiles,10)}function getLevel(a,b){for(var c=Object.keys(a.levels).length,d=0;c>d;d++)if(a.levels[d].tiles===Number(b))return a.levels[d]}function getHighscore(a,b,c,d){c='undefined'!=typeof c?c:4,d='undefined'!=typeof d?d:3;for(var e=a.highscore[c],f='',g=0;d>g;g++)e[g]&&(f+='<tr><td>'+e[g].name+'</td><td>'+e[g].time+'</td></tr>');document.getElementById(b).innerHTML=f;for(var h=document.getElementsByClassName('levelName'),g=0;g<h.length;g++)h[g].innerHTML=current_level.name}var new_memory_array=[],memory_values=[],memory_tile_ids=[],tiles_flipped=0,game_started=!1,current_time=0,timer,current_level,url='/game.json',current_object;loadXMLDoc(url,function(a){removeClasses('formContainer'),current_object=a,getLevels(a.levels);for(var b=objectToArray(a.tiles),c=document.getElementsByName('level'),d=null,e=0;e<c.length;e++)c[e].onclick=function(){d?d.value:null,this!==d&&(d=this),getHighscore(current_object,'highScore3',this.value)};document.getElementById('startGame').addEventListener('click',function(){newBoard(b),hideElement('formContainer'),removeClasses('boardContainer')}),current_level=getLevel(current_object,4),getHighscore(current_object,'highScore3')}),Array.prototype.memory_tile_shuffle=function(){for(var a,b,c=this.length;--c>0;)a=Math.floor(Math.random()*(c+1)),b=this[a],this[a]=this[c],this[c]=b};